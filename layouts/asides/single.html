{{- define "main" }}
{{ $asideType := .Page.Params.aside_type }}

<article class="asides-post {{ $asideType }}-post {{ $asideType }}-single">
  <header class="post-header">
    {{ partial "breadcrumbs.html" . }}
    <h1 class="{{ $asideType }}-title">
      {{ if eq $asideType "bluesky" }}
        <a href="https://bsky.app/profile/deuts.hamili.net">@deuts.hamili.net</a>
      {{ else if eq $asideType "linkding" }}
        <a href="https://bm.deuts.org">bm.deuts.org</a>
      {{ else if eq $asideType "gotosocial" }}
        <a href="https://your.gotosocial.url">Your GoToSocial Handle</a>
      {{ end }}
    </h1>
  </header>
  
  <div class="asides-post-date">{{ .Date.Format "January 2, 2006" }}</div>
  <div class="{{ $asideType }}-post-cont">
    <div class="post-time">
      <span title="{{ .Date }}">{{ .Date.Format "15:04" }}</span>
    </div>
    <div class="{{ $asideType }}-content">
      {{ .Content }}
      <div class="{{ $asideType }}-footer">
        {{ if eq $asideType "bluesky" }}
          <a href="{{ .Params.link }}" aria-label="Link to bsky">{{ .Params.atpid }}</a>
        {{ else if eq $asideType "linkding" }}
          <a href="https://bm.deuts.org/bookmarks/shared?details={{ .Params.ld_id }}" class="ld-backlink">BM{{ .Params.ld_id }}</a>
          {{ if .Params.ld_tags }}
            {{ $tagsLength := len .Params.ld_tags }}
            {{ range $index, $tag := .Params.ld_tags }}
              <a href="/k/{{ lower $tag }}/">{{ $tag }}</a>{{ if ne $index (sub $tagsLength 1) }},{{ end }}
            {{ end }}
          {{ end }}
        {{ else if eq $asideType "gotosocial" }}
          <a href="https://your.gotosocial.url/details/{{ .Params.gts_id }}" class="gts-backlink">GTS{{ .Params.gts_id }}</a>
        {{ end }}
      </div>
    </div>
  </div>
</article>

{{- end }}
